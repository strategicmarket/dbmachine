



https://engineering.intercom.com/scaling-mongodb-to-1-million-connections-and-beyond/

------------

summary points

Now, despite saving about a terabyte of RAM, one megabyte per connection, a million connections; the key improvement was removal of connection churn. This connection churn was putting Linux page cache under pressure, and thus flushing Mongo critical set from the memory.

But other than the technical details, is the project actually a success or not? Well, before Dvara, in previous few months, we had about 150 Mongo fail-overs. After deploying Dvara, in the last month and a half, we had only two of them. Every Mongo failover has a brief impact to a portion of our customers and a potential to page our engineers.

So, so far it looks really good, though we also have really detailed paging metrics. So here we see that in the Week 35, we saw that we had Mongo capacity issues, and we were doing a bit of firefighting trying to work with it. It wasn't going well, but we were still trying it.

USED DVARA as connection proxy to mongo

Banjaxed, which is our incident management tool.